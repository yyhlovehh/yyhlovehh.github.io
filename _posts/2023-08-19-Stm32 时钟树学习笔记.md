## Stm32 时钟树学习

![QQ截图20230819041130](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202308190414196.png)

由图看出，Stm32的时钟一共有四个HSI、HSE、LSI、LSE，**最大xxMHz可以得到默认分频系数，即为默认配置**。

- 系统时钟来源

系统时钟SYSCLK有三个来源HSI、PLLCLK、HSE，其中PLLCLK由HSI、HSE分频以及倍频得到，因此可以说系统时钟SYSCLK是由高速内部时钟HSI、高速外部时钟HSE得到的，只不过外部的石英振荡器比内部的RC振荡器更加稳定，所以一般用外部晶振HSE。

Stm32调用时钟初始化函数SystemInit()，首先选择内部时钟HSI（8MHZ）作为系统时钟，然后再启动外部时钟HSE（8MHZ）,走上路进入PLL锁相环，倍频9倍得到72MHz，等到锁相环输出稳定后，选择PLLCLK作为系统时钟，这样使系统时钟由8MHz变为72MHz。

- 实时时钟RTC来源

- 看门狗时钟来源
- CSS时钟安全系统

可以监测外部时钟的运行状态，一旦外部时钟失效，可以把外部时钟切换为内部时钟，保证系统时钟的运行。

