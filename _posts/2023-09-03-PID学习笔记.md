

## PID学习笔记

#### 2.位置式PID

给系统一个阶跃信号（旋转一定的角度），观察系统曲线图。

##### 2.1P、I、D参数的大致作用：

P:用于提高响应速度；

I：减小稳态误差；

D：抑制震荡。

##### 2.2.位置式PID参数整定

![PID1](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309032135310.png)



![PID2](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309032136276.png)



![PID3](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309032140068.png)



![PID4](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309032140664.png)

#### 3.速度式PID

速度闭环控制就是根据单位时间获取得脉冲数测量电机的速度信息，并且与目标值进行比较，得到控制偏差，然后通过对偏差的比例、积分、微分进行控制，使偏差趋向于0的过程。

##### 3.1测速原理

M法：在规定时间内测量所产生的脉冲个数来获得被测速度；因存在测量时间内首尾的半个脉冲问题，可能会有2各脉冲的误差。速度较低时，因测量时间内脉冲数变少，误差所占的比例会变大，所以M法宜测量高速。

T法：测量相邻两个脉冲的时间来测量速度；适宜低速。

M/T法：同时测量检测时间和在此时间内脉冲发生器发出的脉冲个数来测量速度。

##### 3.2公式分析

##### ![PID5](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309032159715.png)![PID6](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309040010865.png)

##### 3.3代码

![PID7](https://raw.githubusercontent.com/yyhlovehh/yyhlovehh.github.io/master/202309040012433.png)

为什么不用D?

先定时1s(不能太短)产生中断，读取占空比0~100时的编码器数值范围。占空比和编码器数值范围成比例对应。

数据精度导致稳态返回的PWM值每次不一样？